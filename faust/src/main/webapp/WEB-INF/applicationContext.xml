<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:lang="http://www.springframework.org/schema/lang" xmlns:oxm="http://www.springframework.org/schema/oxm" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:sec="http://www.springframework.org/schema/security" xmlns:task="http://www.springframework.org/schema/task" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
		http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.0.xsd
		http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd
		http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd
		http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

	<bean id="config" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
		<property name="ignoreResourceNotFound" value="true" />
		<property name="locations">
			<list>
				<value>/WEB-INF/config-default.properties</value>
				<value>/WEB-INF/config-#{T(java.net.InetAddress).localHost.hostName}.properties</value>
			</list>
		</property>
	</bean>
	
	<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource" p:basename="/WEB-INF/messages" />

	<context:component-scan base-package="de.faustedition">
		<context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller" />
	</context:component-scan>
	
	<tx:annotation-driven />

	<task:scheduler id="scheduler" pool-size="10" />
	<task:scheduled-tasks scheduler="scheduler">
		<task:scheduled ref="encodingStatusManager" method="update" cron="0 0 * * * *" />
		<!--		<task:scheduled ref="facsimileManager" method="generate" cron="0 0 0 * * *" />-->
	</task:scheduled-tasks>

	<sec:http auto-config="true" realm="Digitale Faust-Edition" create-session="never">
		<sec:intercept-url pattern="/" access="ROLE_ANONYMOUS,ROLE_EDITOR" />
		<sec:intercept-url pattern="/project/**" access="ROLE_ANONYMOUS,ROLE_EDITOR" />
		<sec:intercept-url pattern="/**" access="ROLE_EDITOR" />
		<sec:intercept-url pattern="/css/**" filters="none" />
		<sec:intercept-url pattern="/img/**" filters="none" />
		<sec:intercept-url pattern="/js/**" filters="none" />
		<sec:intercept-url pattern="/static/**" filters="none" />
		<sec:intercept-url pattern="/swf/**" filters="none" />
		<sec:http-basic />
		<sec:custom-filter ref="localNetPreAuthenticatedProcessingFilter" before="PRE_AUTH_FILTER" />
	</sec:http>

	<sec:authentication-manager alias="authenticationManager">
		<sec:authentication-provider ref="preAuthenticatedAuthenticationProvider" />
		<sec:authentication-provider>
			<sec:password-encoder hash="sha" />
			<sec:user-service>
				<sec:user name="wissenbach" password="d63040a7d05731210b35c04d8f7cda368853f224" authorities="ROLE_EDITOR, ROLE_ADMIN" />
				<sec:user name="jannidis" password="6a8fa2ea76debbe8131ec750b57e9c48d1e17a23" authorities="ROLE_EDITOR, ROLE_ADMIN" />
				<sec:user name="henke" password="43d479cd8936f1092a0608a346ba2f9b65098f35" authorities="ROLE_EDITOR" />
				<sec:user name="bohnenkamp" password="94fd183569cd134171120fbc746ebc13a7fc9dca" authorities="ROLE_EDITOR" />
				<sec:user name="henzel" password="ef9bdb418fcf5f4b906d170628cf7935dd2a5dab" authorities="ROLE_EDITOR" />
				<sec:user name="bruening" password="f88279a7be8bde13c6c5c750ef2cabe5d73da78e" authorities="ROLE_EDITOR" />
				<sec:user name="pravida" password="3c0bfdcc47d9dc1aa3a11d149fb4a836b3c408fc" authorities="ROLE_EDITOR" />
				<sec:user name="middell" password="e33d633cdd4c2f569bbe91d92b0ad2e11b8de58b" authorities="ROLE_EDITOR, ROLE_ADMIN" />
				<sec:user name="faust" password="ed34f4e7e660d18083745fc0982623eb6e095f5e" authorities="ROLE_EDITOR" />
				<sec:user name="gutachter1" password="615133dfb5ec73bcf9b9bc3b9f82662dfa9a3aad" authorities="ROLE_EDITOR"/>
				<sec:user name="gutachter2" password="cf15478d01bbab6364684fdc563ba71cad6b104b" authorities="ROLE_EDITOR"/>
			</sec:user-service>
		</sec:authentication-provider>
	</sec:authentication-manager>
</beans>
